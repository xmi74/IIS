{% extends 'base.html' %}

{% block title %}
Register
{% endblock %}

{% block body %}
<div class="container">
    <h2 class="text-center">Register a new user</h2>

    <form method="POST" action="{{ url_for('routes.register_page') }}">
        {{ form.hidden_tag() }}
        
        <!-- Dynamically render fields -->
        {% for field in form %}
            {% if field.type != "HiddenField" and field.name not in ['submit'] and field.name not in ['csrf_token'] %}
                {% include '_form_field.html' %}
            {% endif %}
        {% endfor %}

        <!-- Required field label -->
        <div class="form-group text-muted text-center" style="font-size: 0.9rem;">
            <span class="text-danger">*</span> = Required field
        </div>
        
        <div class="form-group">
            {{ form.submit(class_='btn btn-primary') }}
        </div>
    </form>

    <h3 class="text-center mt-4">Existing Users</h3>
    <ul class="list-group">
        {% for user in users %}
            <li class="list-group-item bg-dark text-white">
                <div class="row align-items-center">
                    <div class="col-md-3">{{ user.login }}</div>
                    <div class="col-md-3">{{ user.first_name }}</div>
                    <div class="col-md-3">{{ user.last_name }}</div>
                    <div class="col-md-3">{{ user.role }}</div>
                </div>
            </li>
        {% endfor %}
    </ul>
</div>
{% endblock %}